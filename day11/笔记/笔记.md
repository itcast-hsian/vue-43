# 路由守卫添加访问权限



# axios拦截器

拦截的是response，[官网地址](https://github.com/axios/axios)

![1585618011074](assets/1585618011074.png)



## 错误拦截

在`main.js`中添加拦截器处理请求错误的提示

```js
// 引入vant ui组件库
import Vant, {Toast} from 'vant';

// axios的响应拦截器 文档地址：https://github.com/axios/axios#interceptors
axios.interceptors.response.use(res => {
	return res;
}, error => {
	// 如果请求返回的结果是错误的，会进入到错误的处理函数中
	// error是js原生的错误对象，我们可以用过error.response可以获取到详细的信息
	const {statusCode, message} = error.response.data;

	if(statusCode === 400){
		Toast.fail(message);
	}

	return Promise.reject(error)
})
```



# 首页

1.新建首页

2.首页静态布局

​	1.van-tabs组件的使用

​	2.添加跳转栏目管理的按钮

3.文章列表模块组件封装

4.分页组件的使用



## van-tabs组件的使用

文档地址：<https://youzan.github.io/vant/#/zh-CN/tab#nian-xing-bu-ju>

`src/views/Index.vue`

```vue
<!-- tab栏切换 -->
        <!-- v-model：就是当前的索引值，是唯一的，比较类似于for循环的key -->
        <!-- sticky：是否使用粘性定位布局 -->
        <!-- swipeable: 是否开启手势滑动切换 -->
        <van-tabs v-model="active" sticky swipeable>
            <van-tab v-for="(item, index) in categories" :key="index" :title="item">
                <div>
                    <p>内容 {{ index }}</p>
                </div>
            </van-tab>
        </van-tabs>
```



## 添加跳转栏目管理的按钮

1.可以栏目数据的最后一位添加一个箭头

![1585625758865](assets/1585625758865.png)

2.修改样式，保证跳转到栏目管理的箭头定位的右边

> 修改第三方组件的样式必须要在类名的前面加上 /deep/

3.监听tab的切换，如果点击了最后一个，跳转到栏目管理页



![1585625872610](assets/1585625872610.png)





## 文章列表模块组件封装









