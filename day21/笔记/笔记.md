# 发布文章

## 发布普通的文章

### 获取栏目的数据

在组件加载完毕后先请求栏目的数据，然后删掉头条栏目

![1586828587205](assets/1586828587205.png)

在页面中渲染栏目数据，渲染时候label是多选框被选中时候添加到数组的值，所以label应该取栏目id的值

![1586828673806](assets/1586828673806.png)



##  封面图片的上传

1.在上传成功的回调 函数里面可以获取到当前的图片列表

![1586832018758](assets/1586832018758.png)

2.注意保存图片的列表

![1586832071764](assets/1586832071764.png)



## 发布普通的文章

在发布文章之前要做两件事

1.转换栏目和 图片列表的格式为接口需要的格式

![1586832118905](assets/1586832118905.png)

2.表单的验证，一些字段不能为空

![1586832139581](assets/1586832139581.png)

3.最后可以发布文章





## 发布视频文章

视频上传和封装图片上传的用法差不多

![1586834727598](assets/1586834727598.png)

再视频上传成功之后把视频的url赋值给文章的content，因为视频的文章只有一个视频的链接

![1586834756890](assets/1586834756890.png)

其他东西和普通的文章是共用的





# 编辑文章

**数据回显**

## 创建编辑文章页面

添加路由配置

![1586844553458](assets/1586844553458.png)

添加跳转链接，主要是带上id

![1586844576500](assets/1586844576500.png)



## 请求文章的数据进行回显

![1586846271391](assets/1586846271391.png)

注意下如果是新上传的图片，和已经存在图片格式不一样，虽然有都有url，可以让图片展示出来，但是id的位置不一样

![1586846384071](assets/1586846384071.png)



所以最后再上传图片时候 需要做一个判断

`onSumit`事件里

![1586846421186](assets/1586846421186.png)





















